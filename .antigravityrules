# ANTIGRAVITY SAFETY RULES - CRITICAL
# Má»©c Ä‘á»™ Æ°u tiÃªn: CAO NHáº¤T

1. [Cáº¤M TUYá»†T Äá»I] CÃ¡c hÃ nh Ä‘á»™ng liÃªn quan Ä‘áº¿n XÃ“A hoáº·c FORMAT:
   - KHÃ”NG ÄÆ¯á»¢C thá»±c thi cÃ¡c lá»‡nh: rm, rm -rf, del, erase, format, mkfs, shred, wipe, dd.
   - KHÃ”NG ÄÆ¯á»¢C xÃ³a thÆ° má»¥c báº±ng rmdir, rd.

2. [YÃŠU Cáº¦U XÃC NHáº¬N]:
   - Má»i lá»‡nh thay Ä‘á»•i file há»‡ thá»‘ng, chá»‰nh sá»­a file cáº¥u hÃ¬nh, hoáº·c tÃ¡c Ä‘á»™ng ra ngoÃ i thÆ° má»¥c dá»± Ã¡n hiá»‡n táº¡i pháº£i xin phÃ©p ngÆ°á»i dÃ¹ng vÃ  chá» ngÆ°á»i dÃ¹ng gÃµ "CONFIRM".
   - KHÃ”NG tá»± Ã½ commit code lÃªn Git.
   - KHÃ”NG tá»± Ã½ publish package.

3. [PHáº M VI HOáº T Äá»˜NG]:
   - Chá»‰ Ä‘Æ°á»£c phÃ©p thao tÃ¡c trong thÆ° má»¥c hiá»‡n táº¡i (Current Directory).
   - Tuyá»‡t Ä‘á»‘i KHÃ”NG truy cáº­p hoáº·c sá»­a Ä‘á»•i cÃ¡c thÆ° má»¥c há»‡ thá»‘ng (C:\Windows, /etc, /var, /usr) hoáº·c thÆ° má»¥c cÃ¡ nhÃ¢n khÃ¡c (Documents, Desktop) náº¿u khÃ´ng Ä‘Æ°á»£c yÃªu cáº§u cá»¥ thá»ƒ.

4. [Báº¢O Vá»† Dá»® LIá»†U]:
   - TrÆ°á»›c khi sá»­a Ä‘Ã¨ má»™t file quan trá»ng, hÃ£y táº¡o báº£n sao lÆ°u (backup) cá»§a file Ä‘Ã³.

# ðŸš€ PROJECT-SPECIFIC RULES (Rails 7.1 + Hotwire)

## Backend (Rails)
- **N+1 Prevention**: Always use `.includes()`, `.preload()`, or `.eager_load()` when accessing associations in a loop.
- **Service Objects**: Move complex business logic (>10 lines) from Controllers to `app/services/`.
- **Fail Safe**: Use `save!` and `create!` in background jobs or atomic transactions to ensure explicit failures.
- **Security**: Never interpolate strings into SQL. Use parameterized queries (`where("name = ?", name)`).

## Frontend (Hotwire + Tailwind)
- **CSS Strategy**: Use Tailwind utility classes directly in HTML/ERB. Avoid `@apply` in CSS files unless creating a highly reusable primitive.
- **Turbo First**: Prefer `Turbo Frames` and `Turbo Stream` updates over custom `fetch()` calls.
- **Stimulus naming**: Use strict kebab-case for controller names (`data-controller="search-bar"`) and targets (`data-search-bar-target="input"`).
- **Icons**: Use SVG icons (Heroicons/Lucide) inline or via helper/component. Do not add `font-awesome` or image-based icons.

## Testing (RSpec)
- **FactoryBot**: Use factories instead of fixtures.
- **Lazy Loading**: Prefer `let` and `subject` over instance variables (`@user`) in specs.
- **Integration**: Feature specs must use `js: true` (Capybara) only when testing dynamic JS behavior.
