<%# Sidebar Navigation %>
<aside id="sidebar" class="w-64 bg-brand-blue text-white flex flex-col flex-shrink-0 shadow-xl z-50 fixed lg:relative h-full sidebar-transition -translate-x-full lg:translate-x-0" data-controller="sidebar">
  <%# Logo %>
  <div class="h-16 flex items-center px-6 border-b border-blue-800 bg-brand-blue shadow-sm">
    <i class="fa-solid fa-scale-balanced text-white text-2xl mr-3"></i>
    <%= link_to root_path, class: "font-bold text-xl tracking-wide text-white hover:text-gray-200" do %>
      AnKhangCRM
    <% end %>
  </div>

  <%# Navigation Menu %>
  <nav class="flex-1 px-3 py-6 space-y-1 overflow-y-auto sidebar-scroll">
    <%# Dashboard %>
    <%= link_to root_path, class: "flex items-center px-4 py-3 #{current_page?(root_path) ? 'bg-white text-brand-blue rounded-lg shadow-md font-bold' : 'text-blue-100 hover:text-white hover:bg-blue-800 rounded-lg transition-colors font-medium'}" do %>
      <i class="fa-solid fa-chart-line w-6 <%= current_page?(root_path) ? 'text-brand-orange' : 'text-blue-300' %>"></i>
      <span>Tổng quan</span>
    <% end %>

    <%# Kinh doanh section - TASK-019 %>
    <% if current_user.super_admin? %>
      <div class="pt-6 pb-2 px-4 text-xs font-bold text-blue-300 uppercase tracking-wider">Kinh doanh</div>
    <% end %>

    <%= sidebar_link "Khách hàng", contacts_path, "fa-address-book", permission: "contacts.view" %>
    <%= sidebar_link "Loại nhu cầu", service_types_path, "fa-layer-group", permission: "settings.manage" %>

    <%# Tổ chức section %>
    <% if current_user.super_admin? %>
      <div class="pt-6 pb-2 px-4 text-xs font-bold text-blue-300 uppercase tracking-wider">Tổ chức</div>
    <% end %>

    <%= sidebar_link "Đội nhóm", teams_path, "fa-user-group", permission: "teams.view" %>
    <%= sidebar_link "Phân quyền", roles_path, "fa-user-shield", permission: "roles.view" %>
    <%= sidebar_link "Nhân viên", users_path, "fa-id-card", permission: "employees.view" %>
    <%= sidebar_link "Lịch nghỉ lễ", holidays_path, "fa-calendar-days", permission: "holidays.manage" %>
    <%= sidebar_link "Lịch Thứ 7", saturday_schedules_path, "fa-calendar-check", permission: "saturday_schedules.manage" %>

    <%# Hệ thống section (Hidden for Phase 1) %>
    <%# Hệ thống section (Hidden for Phase 1) %>
  </nav>

  <%# Footer (Removed as requested) %>
  <%# <div class="p-4 border-t border-blue-800 bg-blue-900/50">...</div> %>
</aside>

<%# Mobile overlay %>
<div id="sidebar-overlay" class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden" data-action="click->sidebar#close"></div>
