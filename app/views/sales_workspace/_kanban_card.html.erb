<div id="kanban_card_<%= contact.id %>"
     class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 cursor-grab hover:shadow-md transition-shadow"
     draggable="true"
     data-contact-id="<%= contact.id %>">
  <%# Contact Header %>
  <div class="flex items-start justify-between mb-2">
    <div class="flex-1 min-w-0">
      <h4 class="text-sm font-medium text-gray-900 truncate"><%= contact.name %></h4>
      <p class="text-xs text-gray-500"><%= contact.code %></p>
    </div>
    <%= link_to contact_path(contact), class: "text-gray-400 hover:text-brand-blue ml-2", target: "_blank" do %>
      <i class="fa-solid fa-external-link text-xs"></i>
    <% end %>
  </div>

  <%# Contact Info %>
  <div class="space-y-1 mb-3">
    <div class="flex items-center text-xs text-gray-500">
      <i class="fa-solid fa-phone w-4 text-gray-400"></i>
      <span><%= contact.phone %></span>
    </div>
    <% if contact.service_type %>
      <div class="flex items-center text-xs text-gray-500">
        <i class="fa-solid fa-tag w-4 text-gray-400"></i>
        <span><%= contact.service_type.name %></span>
      </div>
    <% end %>
    <% if contact.next_appointment %>
      <div class="flex items-center text-xs text-<%= contact.next_appointment < Time.current ? 'red' : 'green' %>-600">
        <i class="fa-solid fa-calendar w-4"></i>
        <span><%= contact.next_appointment.strftime("%d/%m %H:%M") %></span>
      </div>
    <% end %>
  </div>

  <%# Quick Actions %>
  <div class="flex items-center justify-between pt-2 border-t border-gray-100">
    <div class="flex space-x-2">
      <%= link_to "tel:#{contact.phone}", class: "text-green-600 hover:text-green-800" do %>
        <i class="fa-solid fa-phone text-sm"></i>
      <% end %>
      <% if contact.zalo_link.present? %>
        <%= link_to contact.zalo_link, target: "_blank", class: "text-blue-600 hover:text-blue-800" do %>
          <i class="fa-solid fa-message text-sm"></i>
        <% end %>
      <% end %>
    </div>
    <span class="text-xs text-gray-400"><%= time_ago_in_words(contact.updated_at) %></span>
  </div>
</div>
