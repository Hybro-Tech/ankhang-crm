<%# TASK-012: Login page based on mockup docs/ui-design/wireframes/index.html %>
<% content_for :title, "Đăng nhập" %>

<div class="max-w-md w-full bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden">
  <%# Brand Header %>
  <div class="bg-[#0B387A] p-8 text-center text-white">
    <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-white/10 mb-4">
      <i class="fa-solid fa-scale-balanced text-3xl"></i>
    </div>
    <h1 class="text-2xl font-bold tracking-wide">AnKhangCRM</h1>
    <p class="text-blue-200 text-sm mt-2">Hệ thống Quản lý Luật An Khang</p>
  </div>

  <%# Login Form %>
  <div class="p-8">
    <%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>
      <%# Email/Username field %>
      <div class="mb-5">
        <label for="user_email" class="block text-sm font-semibold text-gray-700 mb-2">Email hoặc Username</label>
        <div class="relative">
          <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400">
            <i class="fa-solid fa-envelope"></i>
          </span>
          <%= f.text_field :email, 
              id: "user_email",
              autofocus: true, 
              autocomplete: "email",
              placeholder: "nhanvien@congty.com",
              class: "w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0B387A] focus:border-[#0B387A] outline-none transition-all" %>
        </div>
      </div>

      <%# Password field %>
      <div class="mb-6">
        <label for="user_password" class="block text-sm font-semibold text-gray-700 mb-2">Mật khẩu</label>
        <div class="relative" data-controller="password-toggle">
          <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400">
            <i class="fa-solid fa-lock"></i>
          </span>
          <%= f.password_field :password,
              id: "user_password",
              autocomplete: "current-password",
              placeholder: "••••••••",
              data: { password_toggle_target: "input" },
              class: "w-full pl-10 pr-10 py-2.5 bg-gray-50 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#0B387A] focus:border-[#0B387A] outline-none transition-all" %>
          <button type="button" 
                  class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"
                  data-action="click->password-toggle#toggle">
            <i class="fa-solid fa-eye" data-password-toggle-target="icon"></i>
          </button>
        </div>
      </div>

      <%# Remember me & Forgot password %>
      <div class="flex items-center justify-between mb-6">
        <% if devise_mapping.rememberable? %>
          <div class="flex items-center">
            <%= f.check_box :remember_me, class: "h-4 w-4 text-[#0B387A] focus:ring-[#0B387A] border-gray-300 rounded" %>
            <%= f.label :remember_me, "Ghi nhớ đăng nhập", class: "ml-2 block text-sm text-gray-600" %>
          </div>
        <% end %>
        
        <% if devise_mapping.recoverable? %>
          <div class="text-sm">
            <%= link_to "Quên mật khẩu?", new_password_path(resource_name), 
                class: "font-medium text-[#0B387A] hover:text-blue-800" %>
          </div>
        <% end %>
      </div>

      <%# Error messages %>
      <% if resource.errors.any? %>
        <div class="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg">
          <div class="flex items-center text-red-800 text-sm">
            <i class="fa-solid fa-exclamation-triangle mr-2"></i>
            <span><%= resource.errors.full_messages.first %></span>
          </div>
        </div>
      <% end %>

      <%# Submit button %>
      <%= f.submit "Đăng nhập", 
          class: "w-full bg-[#0B387A] text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-900 transition-colors shadow-md cursor-pointer" %>
    <% end %>

    <%# Footer %>
    <div class="mt-8 text-center text-xs text-gray-400">
      <p>&copy; 2026 Luật An Khang. All rights reserved.</p>
      <p class="mt-1">Hỗ trợ kỹ thuật: 1900 xxxx</p>
    </div>
  </div>
</div>
