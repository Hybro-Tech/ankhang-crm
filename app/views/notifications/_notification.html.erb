<%# TASK-057: Notification item partial %>
<% target_url = notification.read? ? (notification.action_url.presence || notifications_path) : mark_as_read_notification_path(notification) %>
<%= link_to target_url, 
            method: (notification.read? ? :get : :post),
            data: (notification.read? ? {} : { turbo_method: :post }),
            class: "block" do %>
  <div id="notification_<%= notification.id %>" 
       class="flex items-start gap-3 p-3 hover:bg-gray-100 border-b border-gray-100 transition-colors <%= notification.read? ? 'bg-white' : 'bg-blue-50' %>">
    <%# Icon %>
    <div class="flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center <%= notification.color_class %>">
      <i class="fas <%= notification.resolved_icon %>"></i>
    </div>
    
    <%# Content %>
    <div class="flex-1 min-w-0">
      <p class="text-sm font-medium text-gray-900 truncate"><%= notification.title %></p>
      <% if notification.body.present? %>
        <p class="text-sm text-gray-500 line-clamp-2"><%= notification.body %></p>
      <% end %>
      <p class="text-xs text-gray-400 mt-1">
        <%= time_ago_in_words(notification.created_at) %> trước
      </p>
    </div>
    
    <%# Unread indicator - blue dot %>
    <% unless notification.read? %>
      <div class="flex-shrink-0 self-center">
        <span class="inline-block w-2 h-2 bg-blue-600 rounded-full"></span>
      </div>
    <% end %>
  </div>
<% end %>
